<html th:lang="${#locale.language}"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/_layout}">

<title layout:fragment="title" th:text="#{issue.title.show}"></title>

<section class="container" layout:fragment="content">

        <h2 th:text="#{issue.title.show}"></h2>

        <form th:action="@{/issue/save}" th:object="${issue}" method="post">

            <input type="hidden" th:field="*{id}" id="issue-id"/>
            <input type="hidden" th:field="*{creator}" id="creator" th:value="${#authentication.principal}"/>

            <div class="form-group row">
                <div class="col-sm-4">
                    <label class="col-form-label" th:text="#{issue.project}"></label>
                </div>
                <div class="col-sm-8">
                    <select class="form-control" th:field="*{project}">
                        <option th:value="${null}"></option>
                        <option th:each="p : ${projects}"
                                th:text="${p.name}"
                                th:value="${p.id}"></option>
                    </select>
                </div>
            </div>

            <div class="form-group row">
                <div class="col-sm-4">
                    <label class="col-form-label" th:text="#{issue.state}"></label>
                </div>
                <div class="col-sm-8">
                    <select class="form-control" th:field="*{state}" id="state-select">
                        <option th:value="${null}"></option>
                        <option th:each="s : ${T(net.brylka.BugTrackerJava.enums.State).values()}"
                                th:text="${#messages.msg('state.' + s)}"
                                th:value="${s}"></option>
                    </select>
                </div>
            </div>

            <div class="form-group row">
                <div class="col-sm-4">
                    <label class="col-form-label" th:text="#{issue.type}"></label>
                </div>
                <div class="col-sm-8">
                    <select class="form-control" th:field="*{type}" id="type-select">
                        <option th:value="${null}"></option>
                        <option th:each="t : ${T(net.brylka.BugTrackerJava.enums.Type).values()}"
                                th:text="${#messages.msg('type.' + t)}"
                                th:value="${t}"
                                th:selected="${t == type}"></option>
                    </select>
                </div>
            </div>

            <div class="form-group row">
                <div class="col-sm-4">
                    <label class="col-form-label" th:text="#{issue.assignee}"></label>
                </div>
                <div class="col-sm-8">
                    <select class="form-control" th:field="*{assignee}">
                        <option th:value="${null}"></option>
                        <option th:each="u : ${persons}"
                                th:text="${u.name}"
                                th:value="${u.id}"></option>
                    </select>
                </div>
            </div>

            <div class="form-group row">
                <div class="col-sm-4">
                    <label class="col-form-label" th:text="#{issue.priority}"></label>
                </div>
                <div class="col-sm-8">
                    <select class="form-control" th:field="*{priority}">
                        <option th:value="${null}"></option>
                        <option th:each="p : ${T(net.brylka.BugTrackerJava.enums.Priority).values()}"
                                th:text="${#messages.msg('priority.' + p)}"
                                th:value="${p}"></option>
                    </select>
                </div>
            </div>

            <div class="form-group row">
                <div class="col-sm-4">
                    <label class="col-form-label" th:text="#{issue.code}"></label>
                </div>
                <div class="col-sm-8">
                    <input class="form-control"
                           th:field="*{code}"/>
                </div>
            </div>

            <div class="form-group row">
                <div class="col-sm-4">
                    <label class="col-form-label" th:text="#{issue.name}"></label>
                </div>
                <div class="col-sm-8">
                    <input class="form-control"
                           th:field="*{name}"/>
                </div>
            </div>

            <div class="form-group row">
                <div class="col-sm-4">
                    <label class="col-form-label" th:text="#{issue.description}"></label>
                </div>
                <div class="col-sm-8">
                    <textarea class="form-control" rows="5"
                           th:field="*{description}"/>
                </div>
            </div>

            <div class="row float-right">
                <button type="submit" class="btn btn-primary" th:text="#{button.save}"></button>
                <a th:href="@{/issue/}" class="btn btn-default" th:text="#{button.cancel}"></a>
            </div>

        </form>
</section>